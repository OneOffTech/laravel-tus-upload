"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var tus=createCommonjsModule((function(module,exports){var f;f=function(){return function e(t,r,n){function o(a,u){if(!r[a]){if(!t[a]){var s="function"==typeof commonjsRequire&&commonjsRequire;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[a]={exports:{}};t[a][0].call(f.exports,(function(e){var r=t[a][1][e];return o(r||e)}),f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof commonjsRequire&&commonjsRequire,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){return(0,i.default)()?r(null,function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);t=(t<<5)-t+n,t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t)):r(null,["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))};var n,o=e("./isReactNative"),i=(n=o)&&n.__esModule?n:{default:n}},{"./isReactNative":3}],2:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}},{}],3:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}},{}],4:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=new FileReader;r.onload=function(){t(null,new Uint8Array(r.result))},r.onerror=function(e){t(e)},r.readAsArrayBuffer(e)}},{}],5:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.newRequest=function(){return new window.XMLHttpRequest},r.resolveUrl=function(e,t){return new i.default(t,e).toString()};var n,o=e("url-parse"),i=(n=o)&&n.__esModule?n:{default:n}},{"url-parse":16}],6:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r.getSource=function(e,t,r){if((0,o.default)()&&e&&void 0!==e.uri)(0,i.default)(e.uri,(function(e,t){if(e)return r(new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+e));r(null,new f(t))}));else{if("function"!=typeof e.slice||void 0===e.size)return"function"==typeof e.read?(t=+t,isFinite(t)?void r(null,new l(e,t)):void r(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):void r(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));r(null,new f(e))}};var o=s(e("./isReactNative")),i=s(e("./uriToBlob")),a=s(e("./isCordova")),u=s(e("./readAsByteArray"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function e(t){c(this,e),this._file=t,this.size=t.size}return n(e,[{key:"slice",value:function(e,t,r){(0,a.default)()?(0,u.default)(this._file.slice(e,t),(function(e,t){if(e)return r(e);r(null,t)})):r(null,this._file.slice(e,t))}},{key:"close",value:function(){}}]),e}(),l=function(){function e(t,r){c(this,e),this._chunkSize=r,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return n(e,[{key:"slice",value:function(e,t,r){if(!(e<this._bufferOffset))return this._readUntilEnoughDataOrDone(e,t,r);r(new Error("Requested data is before the reader's current offset"))}},{key:"_readUntilEnoughDataOrDone",value:function(e,t,r){var n=this,o=t<=this._bufferOffset+p(this._buffer);if(this._done||o){var i=this._getDataFromBuffer(e,t);r(null,i,null==i&&this._done)}else this._reader.read().then((function(o){var i=o.value;o.done?n._done=!0:void 0===n._buffer?n._buffer=i:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(n._buffer,i),n._readUntilEnoughDataOrDone(e,t,r)})).catch((function(e){r(new Error("Error during read: "+e))}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===p(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function p(e){return void 0===e?0:void 0!==e.size?e.size:e.length}},{"./isCordova":2,"./isReactNative":3,"./readAsByteArray":4,"./uriToBlob":8}],7:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r.getStorage=function(){return o?new a:null};var o=!1;try{o="localStorage"in window;var i="tusSupport";localStorage.setItem(i,localStorage.getItem(i))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;o=!1}r.canStoreURLs=o;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"setItem",value:function(e,t,r){r(null,localStorage.setItem(e,t))}},{key:"getItem",value:function(e,t){t(null,localStorage.getItem(e))}},{key:"removeItem",value:function(e,t){t(null,localStorage.removeItem(e))}}]),e}()},{}],8:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var e=r.response;t(null,e)},r.onerror=function(e){t(e)},r.open("GET",e),r.send()}},{}],9:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(r,"__esModule",{value:!0});var i=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.message));a.originalRequest=i,a.causingError=r;var u=e.message;return null!=r&&(u+=", caused by "+r.toString()),null!=i&&(u+=", originated from request (response code: "+i.status+", response text: "+i.responseText+")"),a.message=u,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();r.default=i},{}],10:[function(e,t,r){var n,o=e("./upload"),i=(n=o)&&n.__esModule?n:{default:n},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./node/storage")),u=i.default.defaultOptions,s={Upload:i.default,canStoreURLs:a.canStoreURLs,defaultOptions:u};if("undefined"!=typeof window){var c=window,f=c.XMLHttpRequest,l=c.Blob;s.isSupported=f&&l&&"function"==typeof l.prototype.slice}else s.isSupported=!0,s.FileStorage=a.FileStorage;t.exports=s},{"./node/storage":7,"./upload":11}],11:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=f(e("./error")),i=f(e("extend")),a=e("js-base64"),u=e("./node/request"),s=e("./node/source"),c=e("./node/storage");function f(e){return e&&e.__esModule?e:{default:e}}var l={endpoint:null,fingerprint:f(e("./node/fingerprint")).default,resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,urlStorage:null,fileReader:null,uploadDataDuringCreation:!1},p=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=(0,i.default)(!0,{},l,r),this._storage=this.options.urlStorage,this.file=t,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}return n(e,[{key:"start",value:function(){var e=this,t=this.file;t?this.options.endpoint||this.options.uploadUrl?(this.options.resume&&null==this._storage&&(this._storage=(0,c.getStorage)()),this._source?this._start(this._source):(this.options.fileReader||s.getSource)(t,this.options.chunkSize,(function(t,r){t?e._emitError(t):(e._source=r,e._start(r))}))):this._emitError(new Error("tus: neither an endpoint or an upload URL is provided")):this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_start",value:function(e){var t=this,r=this.file;if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=e.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));var n=this.options.retryDelays;if(null!=n){if("[object Array]"!==Object.prototype.toString.call(n))return void this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));var o=this.options.onError;this.options.onError=function(e){t.options.onError=o,null!=t._offset&&t._offset>t._offsetBeforeRetry&&(t._retryAttempt=0);var r=!0;"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1);var i=e.originalRequest?e.originalRequest.status:0,a=!d(i,400)||409===i||423===i;if(t._retryAttempt<n.length&&null!=e.originalRequest&&a&&r){var u=n[t._retryAttempt++];t._offsetBeforeRetry=t._offset,t.options.uploadUrl=t.url,t._retryTimeout=setTimeout((function(){t.start()}),u)}else t._emitError(e)}}if(this._aborted=!1,null==this.url)return null!=this.options.uploadUrl?(this.url=this.options.uploadUrl,void this._resumeUpload()):void(this._hasStorage()?this.options.fingerprint(r,this.options,(function(e,r){e?t._emitError(e):(t._fingerprint=r,t._storage.getItem(t._fingerprint,(function(e,r){e?t._emitError(e):null!=r?(t.url=r,t._resumeUpload()):t._createUpload()})))})):this._createUpload());this._resumeUpload()}},{key:"abort",value:function(t,r){var n=this;null!==this._xhr&&(this._xhr.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),r=r||function(){},t?e.terminate(this.url,this.options,(function(e,t){if(e)return r(e,t);n._hasStorage()?n._storage.removeItem(n._fingerprint,r):r()})):r()}},{key:"_hasStorage",value:function(){return this.options.resume&&this._storage}},{key:"_emitXhrError",value:function(e,t,r){this._emitError(new o.default(t,r,e))}},{key:"_emitError",value:function(e){if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_setupXHR",value:function(e){this._xhr=e,h(e,this.options)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=(0,u.newRequest)();t.open("POST",this.options.endpoint,!0),t.onload=function(){if(d(t.status,200)){var r=t.getResponseHeader("Location");if(null!=r){if(e.url=(0,u.resolveUrl)(e.options.endpoint,r),0===e._size)return e._emitSuccess(),void e._source.close();e._hasStorage()&&e._storage.setItem(e._fingerprint,e.url,(function(t){t&&e._emitError(t)})),e.options.uploadDataDuringCreation?e._handleUploadResponse(t):(e._offset=0,e._startUpload())}else e._emitXhrError(t,new Error("tus: invalid or missing Location header"))}else e._emitXhrError(t,new Error("tus: unexpected response while creating upload"))},t.onerror=function(r){e._emitXhrError(t,new Error("tus: failed to create upload"),r)},this._setupXHR(t),this.options.uploadLengthDeferred?t.setRequestHeader("Upload-Defer-Length",1):t.setRequestHeader("Upload-Length",this._size);var r=function(e){var t=[];for(var r in e)t.push(r+" "+a.Base64.encode(e[r]));return t.join(",")}(this.options.metadata);""!==r&&t.setRequestHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,this._addChunkToRequest(t)):t.send(null)}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=(0,u.newRequest)();t.open("HEAD",this.url,!0),t.onload=function(){if(!d(t.status,200))return e._hasStorage()&&d(t.status,400)&&e._storage.removeItem(e._fingerprint,(function(t){t&&e._emitError(t)})),423===t.status?void e._emitXhrError(t,new Error("tus: upload is currently locked; retry later")):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitXhrError(t,new Error("tus: unable to resume upload (new upload cannot be created without an endpoint)"));var r=parseInt(t.getResponseHeader("Upload-Offset"),10);if(isNaN(r))e._emitXhrError(t,new Error("tus: invalid or missing offset value"));else{var n=parseInt(t.getResponseHeader("Upload-Length"),10);if(!isNaN(n)||e.options.uploadLengthDeferred){if(r===n)return e._emitProgress(n,n),void e._emitSuccess();e._offset=r,e._startUpload()}else e._emitXhrError(t,new Error("tus: invalid or missing length value"))}},t.onerror=function(r){e._emitXhrError(t,new Error("tus: failed to resume upload"),r)},this._setupXHR(t),t.send(null)}},{key:"_startUpload",value:function(){var e=this;if(!this._aborted){var t=(0,u.newRequest)();this.options.overridePatchMethod?(t.open("POST",this.url,!0),t.setRequestHeader("X-HTTP-Method-Override","PATCH")):t.open("PATCH",this.url,!0),t.onload=function(){d(t.status,200)?e._handleUploadResponse(t):e._emitXhrError(t,new Error("tus: unexpected response while uploading chunk"))},t.onerror=function(r){e._aborted||e._emitXhrError(t,new Error("tus: failed to upload chunk at offset "+e._offset),r)},this._setupXHR(t),t.setRequestHeader("Upload-Offset",this._offset),this._addChunkToRequest(t)}}},{key:"_addChunkToRequest",value:function(e){var t=this;"upload"in e&&(e.upload.onprogress=function(e){e.lengthComputable&&t._emitProgress(r+e.loaded,t._size)}),e.setRequestHeader("Content-Type","application/offset+octet-stream");var r=this._offset,n=this._offset+this.options.chunkSize;(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(r,n,(function(r,n,o){r?t._emitError(r):(t.options.uploadLengthDeferred&&o&&(t._size=t._offset+(n&&n.size?n.size:0),e.setRequestHeader("Upload-Length",t._size)),null===n?e.send():(e.send(n),t._emitProgress(t._offset,t._size)))}))}},{key:"_handleUploadResponse",value:function(e){var t=this,r=parseInt(e.getResponseHeader("Upload-Offset"),10);if(isNaN(r))this._emitXhrError(e,new Error("tus: invalid or missing offset value"));else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r==this._size)return this.options.removeFingerprintOnSuccess&&this.options.resume&&this._storage.removeItem(this._fingerprint,(function(e){e&&t._emitError(e)})),this._emitSuccess(),void this._source.close();this._startUpload()}}}],[{key:"terminate",value:function(e,t,r){if("function"!=typeof t&&"function"!=typeof r)throw new Error("tus: a callback function must be specified");"function"==typeof t&&(r=t,t={});var n=(0,u.newRequest)();n.open("DELETE",e,!0),n.onload=function(){204===n.status?r():r(new o.default(new Error("tus: unexpected response while terminating upload"),null,n))},n.onerror=function(e){r(new o.default(e,new Error("tus: failed to terminate upload"),n))},h(n,t),n.send(null)}}]),e}();function d(e,t){return e>=t&&e<t+100}function h(e,t){e.setRequestHeader("Tus-Resumable","1.0.0");var r=t.headers||{};for(var n in r)e.setRequestHeader(n,r[n]);e.withCredentials=t.withCredentials}p.defaultOptions=l,r.default=p},{"./error":9,"./node/fingerprint":1,"./node/request":5,"./node/source":6,"./node/storage":7,extend:12,"js-base64":13}],12:[function(e,t,r){var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},s=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t,r=n.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!i)return!1;for(t in e);return void 0===t||n.call(e,t)},c=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},f=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(a)return a(e,t).value}return e[t]};t.exports=function e(){var t,r,n,o,i,a,l=arguments[0],p=1,d=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[1]||{},p=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});p<d;++p)if(null!=(t=arguments[p]))for(r in t)n=f(l,r),l!==(o=f(t,r))&&(h&&o&&(s(o)||(i=u(o)))?(i?(i=!1,a=n&&u(n)?n:[]):a=n&&s(n)?n:{},c(l,{name:r,newValue:e(h,a,o)})):void 0!==o&&c(l,{name:r,newValue:o}));return l}},{}],13:[function(_dereq_,module,exports){(function(global){!function(e,t){"object"==typeof exports&&void 0!==module?module.exports=t(e):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,(function(global){var _Base64=global.Base64,version="2.4.9",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(r>>>18),b64chars.charAt(r>>>12&63),t>=2?"=":b64chars.charAt(r>>>6&63),t>=1?"=":b64chars.charAt(63&r)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,r=t%4,n=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),o=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return o.length-=[0,0,2,1][r],o.join("")},atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,cb_decode)},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(e){return encode(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports&&(module.exports.Base64=global.Base64),{Base64:global.Base64}}))}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,r){var n=Object.prototype.hasOwnProperty;function o(e){return decodeURIComponent(e.replace(/\+/g," "))}r.stringify=function(e,t){t=t||"";var r=[];for(var o in"string"!=typeof t&&(t="?"),e)n.call(e,o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.length?t+r.join("&"):""},r.parse=function(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,n={};t=r.exec(e);){var i=o(t[1]),a=o(t[2]);i in n||(n[i]=a)}return n}},{}],15:[function(e,t,r){t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],16:[function(e,t,r){(function(r){var n=e("requires-port"),o=e("querystringify"),i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],s={hash:1,query:1};function c(e){var t,n=r&&r.location||{},o={},i=typeof(e=e||n);if("blob:"===e.protocol)o=new l(unescape(e.pathname),{});else if("string"===i)for(t in o=new l(e,{}),s)delete o[t];else if("object"===i){for(t in e)t in s||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=a.test(e.href))}return o}function f(e){var t=i.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function l(e,t,r){if(!(this instanceof l))return new l(e,t,r);var i,a,s,p,d,h,_=u.slice(),v=typeof t,b=this,y=0;for("object"!==v&&"string"!==v&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),t=c(t),i=!(a=f(e||"")).protocol&&!a.slashes,b.slashes=a.slashes||i&&t.slashes,b.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(_[3]=[/(.*)/,"pathname"]);y<_.length;y++)"function"!=typeof(p=_[y])?(s=p[0],h=p[1],s!=s?b[h]=e:"string"==typeof s?~(d=e.indexOf(s))&&("number"==typeof p[2]?(b[h]=e.slice(0,d),e=e.slice(d+p[2])):(b[h]=e.slice(d),e=e.slice(0,d))):(d=s.exec(e))&&(b[h]=d[1],e=e.slice(0,d.index)),b[h]=b[h]||i&&p[3]&&t[h]||"",p[4]&&(b[h]=b[h].toLowerCase())):e=p(e);r&&(b.query=r(b.query)),i&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],i=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(i=!0),r.splice(n,1),a--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(b.pathname,t.pathname)),n(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(p=b.auth.split(":"),b.username=p[0]||"",b.password=p[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}l.prototype={set:function(e,t,r){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),i[e]=t;break;case"port":i[e]=t,n(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";i[e]=t.charAt(0)!==a?a+t:t}else i[e]=t;break;default:i[e]=t}for(var s=0;s<u.length;s++){var c=u[s];c[4]&&(i[c[1]]=i[c[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(r.slashes?"//":"");return r.username&&(i+=r.username,r.password&&(i+=":"+r.password),i+="@"),i+=r.host+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},l.extractProtocol=f,l.location=c,l.qs=o,t.exports=l}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:14,"requires-port":15}]},{},[10])(10)},module.exports=f()}));function mitt(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).slice().map((function(e){e(r)})),(e["*"]||[]).slice().map((function(e){e(t,r)}))}}}unwrapExports(tus);var pad=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},env="object"==typeof window?window:self,globalCount=Object.keys(env).length,mimeTypesLength=navigator.mimeTypes?navigator.mimeTypes.length:0,clientId=pad((mimeTypesLength+navigator.userAgent.length).toString(36)+globalCount.toString(36),4),fingerprint_browser=function(){return clientId},getRandomValue,crypto="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(crypto){var lim=Math.pow(2,32)-1;getRandomValue=function(){return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0]/lim)}}else getRandomValue=Math.random;var getRandomValue_browser=getRandomValue,c=0,blockSize=4,base=36,discreteValues=Math.pow(base,blockSize);function randomBlock(){return pad((getRandomValue_browser()*discreteValues<<0).toString(base),blockSize)}function safeCounter(){return c=c<discreteValues?c:0,++c-1}function cuid(){return"c"+(new Date).getTime().toString(base)+pad(safeCounter().toString(base),blockSize)+fingerprint_browser()+(randomBlock()+randomBlock())}cuid.slug=function(){var e=(new Date).getTime().toString(36),t=safeCounter().toString(36).slice(-4),r=fingerprint_browser().slice(0,1)+fingerprint_browser().slice(-1),n=randomBlock().slice(-2);return e.slice(-2)+t+r+n},cuid.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},cuid.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},cuid.fingerprint=fingerprint_browser;var cuid_1=cuid,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeMax=Math.max;function arrayLikeKeys(e,t){var r=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!hasOwnProperty.call(e,i)||o&&("length"==i||isIndex(i,n))||r.push(i);return r}function assignValue(e,t,r){var n=e[t];hasOwnProperty.call(e,t)&&eq(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty.call(e,n))&&r.push(n);return r}function baseRest(e,t){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,o=nativeMax(r.length-t,0),i=Array(o);++n<o;)i[n]=r[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=r[n];return a[t]=i,apply(e,this,a)}}function copyObject(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],u=n?n(r[a],e[a],a,r,e):void 0;assignValue(r,a,void 0===u?e[a]:u)}return r}function createAssigner(e){return baseRest((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&isIterateeCall(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var u=r[n];u&&e(t,u,n,i)}return t}))}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,r){if(!isObject(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike(r)&&isIndex(t,r.length):"string"==n&&t in r)&&eq(r[t],e)}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function eq(e,t){return e===t||e!=e&&t!=t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}var assignIn=createAssigner((function(e,t){copyObject(t,keysIn(t),e)}));function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var lodash_assignin=assignIn,lodash_remove=createCommonjsModule((function(e,t){var r="[object Arguments]",n="[object Map]",o="[object Object]",i="[object Set]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,s=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,l=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[r]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d[n]=d["[object Number]"]=d[o]=d["[object RegExp]"]=d[i]=d["[object String]"]=d["[object WeakMap]"]=!1;var h="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_="object"==typeof self&&self&&self.Object===Object&&self,v=h||_||Function("return this")(),b=t&&!t.nodeType&&t,y=b&&e&&!e.nodeType&&e,g=y&&y.exports===b&&h.process,m=function(){try{return g&&g.binding("util")}catch(e){}}(),w=m&&m.isTypedArray;function j(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function E(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function A(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function O(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var S,C,k,R=Array.prototype,U=Function.prototype,T=Object.prototype,P=v["__core-js_shared__"],x=(S=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",D=U.toString,I=T.hasOwnProperty,z=T.toString,L=RegExp("^"+D.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=v.Symbol,M=v.Uint8Array,B=T.propertyIsEnumerable,F=R.splice,N=(C=Object.keys,k=Object,function(e){return C(k(e))}),V=ge(v,"DataView"),G=ge(v,"Map"),H=ge(v,"Promise"),X=ge(v,"Set"),$=ge(v,"WeakMap"),W=ge(Object,"create"),K=ke(V),Q=ke(G),Z=ke(H),J=ke(X),Y=ke($),ee=q?q.prototype:void 0,te=ee?ee.valueOf:void 0,re=ee?ee.toString:void 0;function ne(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function oe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ae(e){var t=-1,r=e?e.length:0;for(this.__data__=new ie;++t<r;)this.add(e[t])}function ue(e){this.__data__=new oe(e)}function se(e,t){var r=xe(e)||Pe(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!I.call(e,i)||o&&("length"==i||we(i,n))||r.push(i);return r}function ce(e,t){for(var r=e.length;r--;)if(Te(e[r][0],t))return r;return-1}function fe(e,t){for(var r=0,n=(t=je(t,e)?[t]:ve(t)).length;null!=e&&r<n;)e=e[Ce(t[r++])];return r&&r==n?e:void 0}function le(e,t){return null!=e&&t in Object(e)}function pe(e,t,a,u,s){return e===t||(null==e||null==t||!Le(e)&&!qe(t)?e!=e&&t!=t:function(e,t,a,u,s,c){var f=xe(e),l=xe(t),p="[object Array]",d="[object Array]";f||(p=(p=me(e))==r?o:p);l||(d=(d=me(t))==r?o:d);var h=p==o&&!E(e),_=d==o&&!E(t),v=p==d;if(v&&!h)return c||(c=new ue),f||Be(e)?be(e,t,a,u,s,c):function(e,t,r,o,a,u,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new M(e),new M(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Te(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case n:var c=A;case i:var f=2&u;if(c||(c=O),e.size!=t.size&&!f)return!1;var l=s.get(e);if(l)return l==t;u|=1,s.set(e,t);var p=be(c(e),c(t),o,a,u,s);return s.delete(e),p;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,p,a,u,s,c);if(!(2&s)){var b=h&&I.call(e,"__wrapped__"),y=_&&I.call(t,"__wrapped__");if(b||y){var g=b?e.value():e,m=y?t.value():t;return c||(c=new ue),a(g,m,u,s,c)}}if(!v)return!1;return c||(c=new ue),function(e,t,r,n,o,i){var a=2&o,u=Fe(e),s=u.length,c=Fe(t).length;if(s!=c&&!a)return!1;var f=s;for(;f--;){var l=u[f];if(!(a?l in t:I.call(t,l)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var d=!0;i.set(e,t),i.set(t,e);var h=a;for(;++f<s;){l=u[f];var _=e[l],v=t[l];if(n)var b=a?n(v,_,l,t,e,i):n(_,v,l,e,t,i);if(!(void 0===b?_===v||r(_,v,n,o,i):b)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var y=e.constructor,g=t.constructor;y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(d=!1)}return i.delete(e),i.delete(t),d}(e,t,a,u,s,c)}(e,t,pe,a,u,s))}function de(e){return!(!Le(e)||function(e){return!!x&&x in e}(e))&&(Ie(e)||E(e)?L:l).test(ke(e))}function he(e){return"function"==typeof e?e:null==e?Ne:"object"==typeof e?xe(e)?function(e,t){if(je(e)&&Ee(t))return Ae(Ce(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:fe(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=je(t,e)?[t]:ve(t);var n,o=-1,i=t.length;for(;++o<i;){var a=Ce(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;return!!(i=e?e.length:0)&&ze(i)&&we(a,i)&&(xe(e)||Pe(e))}(e,t,le)}(r,e):pe(t,n,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=Fe(e),r=t.length;for(;r--;){var n=t[r],o=e[n];t[r]=[n,o,Ee(o)]}return t}(e);if(1==t.length&&t[0][2])return Ae(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var u=r[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){var s=(u=r[o])[0],c=e[s],f=u[1];if(a&&u[2]){if(void 0===c&&!(s in e))return!1}else{var l=new ue;if(n)var p=n(c,f,s,e,t,l);if(!(void 0===p?pe(f,c,n,3,l):p))return!1}}return!0}(r,e,t)}}(e):je(t=e)?(r=Ce(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return fe(t,e)}}(t);var t,r}function _e(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||T,t!==n)return N(e);var t,r,n,o=[];for(var i in Object(e))I.call(e,i)&&"constructor"!=i&&o.push(i);return o}function ve(e){return xe(e)?e:Se(e)}function be(e,t,r,n,o,i){var a=2&o,u=e.length,s=t.length;if(u!=s&&!(a&&s>u))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var f=-1,l=!0,p=1&o?new ae:void 0;for(i.set(e,t),i.set(t,e);++f<u;){var d=e[f],h=t[f];if(n)var _=a?n(h,d,f,t,e,i):n(d,h,f,e,t,i);if(void 0!==_){if(_)continue;l=!1;break}if(p){if(!j(t,(function(e,t){if(!p.has(t)&&(d===e||r(d,e,n,o,i)))return p.add(t)}))){l=!1;break}}else if(d!==h&&!r(d,h,n,o,i)){l=!1;break}}return i.delete(e),i.delete(t),l}function ye(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function ge(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return de(r)?r:void 0}ne.prototype.clear=function(){this.__data__=W?W(null):{}},ne.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ne.prototype.get=function(e){var t=this.__data__;if(W){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return I.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:I.call(t,e)},ne.prototype.set=function(e,t){return this.__data__[e]=W&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[]},oe.prototype.delete=function(e){var t=this.__data__,r=ce(t,e);return!(r<0)&&(r==t.length-1?t.pop():F.call(t,r,1),!0)},oe.prototype.get=function(e){var t=this.__data__,r=ce(t,e);return r<0?void 0:t[r][1]},oe.prototype.has=function(e){return ce(this.__data__,e)>-1},oe.prototype.set=function(e,t){var r=this.__data__,n=ce(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},ie.prototype.clear=function(){this.__data__={hash:new ne,map:new(G||oe),string:new ne}},ie.prototype.delete=function(e){return ye(this,e).delete(e)},ie.prototype.get=function(e){return ye(this,e).get(e)},ie.prototype.has=function(e){return ye(this,e).has(e)},ie.prototype.set=function(e,t){return ye(this,e).set(e,t),this},ae.prototype.add=ae.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ae.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.clear=function(){this.__data__=new oe},ue.prototype.delete=function(e){return this.__data__.delete(e)},ue.prototype.get=function(e){return this.__data__.get(e)},ue.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.set=function(e,t){var r=this.__data__;if(r instanceof oe){var n=r.__data__;if(!G||n.length<199)return n.push([e,t]),this;r=this.__data__=new ie(n)}return r.set(e,t),this};var me=function(e){return z.call(e)};function we(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||p.test(e))&&e>-1&&e%1==0&&e<t}function je(e,t){if(xe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Me(e))||(u.test(e)||!a.test(e)||null!=t&&e in Object(t))}function Ee(e){return e==e&&!Le(e)}function Ae(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function Oe(e,t){return 1==t.length?e:fe(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(V&&"[object DataView]"!=me(new V(new ArrayBuffer(1)))||G&&me(new G)!=n||H&&"[object Promise]"!=me(H.resolve())||X&&me(new X)!=i||$&&"[object WeakMap]"!=me(new $))&&(me=function(e){var t=z.call(e),r=t==o?e.constructor:void 0,a=r?ke(r):void 0;if(a)switch(a){case K:return"[object DataView]";case Q:return n;case Z:return"[object Promise]";case J:return i;case Y:return"[object WeakMap]"}return t});var Se=Ue((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Me(e))return re?re.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return s.test(e)&&r.push(""),e.replace(c,(function(e,t,n,o){r.push(n?o.replace(f,"$1"):t||e)})),r}));function Ce(e){if("string"==typeof e||Me(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ke(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Re(e){var t=e?e.length:0;return t?e[t-1]:void 0}function Ue(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Ue.Cache||ie),r}function Te(e,t){return e===t||e!=e&&t!=t}function Pe(e){return function(e){return qe(e)&&De(e)}(e)&&I.call(e,"callee")&&(!B.call(e,"callee")||z.call(e)==r)}Ue.Cache=ie;var xe=Array.isArray;function De(e){return null!=e&&ze(e.length)&&!Ie(e)}function Ie(e){var t=Le(e)?z.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function ze(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Le(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function qe(e){return!!e&&"object"==typeof e}function Me(e){return"symbol"==typeof e||qe(e)&&"[object Symbol]"==z.call(e)}var Be=w?function(e){return function(t){return e(t)}}(w):function(e){return qe(e)&&ze(e.length)&&!!d[z.call(e)]};function Fe(e){return De(e)?se(e):_e(e)}function Ne(e){return e}e.exports=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],i=e.length;for(t=he(t);++n<i;){var a=e[n];t(a,n,e)&&(r.push(a),o.push(n))}return function(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==i){var i=o;if(we(o))F.call(e,o,1);else if(je(o,e))delete e[Ce(o)];else{var a=ve(o),u=Oe(e,a);null!=u&&delete u[Ce(Re(a))]}}}}(e,o),r}})),lodash_filter=createCommonjsModule((function(e,t){var r="[object Arguments]",n="[object Map]",o="[object Object]",i="[object Set]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,s=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,l=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[r]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d[n]=d["[object Number]"]=d[o]=d["[object RegExp]"]=d[i]=d["[object String]"]=d["[object WeakMap]"]=!1;var h="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_="object"==typeof self&&self&&self.Object===Object&&self,v=h||_||Function("return this")(),b=t&&!t.nodeType&&t,y=b&&e&&!e.nodeType&&e,g=y&&y.exports===b&&h.process,m=function(){try{return g&&g.binding("util")}catch(e){}}(),w=m&&m.isTypedArray;function j(e,t){for(var r=-1,n=e?e.length:0,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}function E(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function A(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function O(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function S(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var C,k,R,U=Array.prototype,T=Function.prototype,P=Object.prototype,x=v["__core-js_shared__"],D=(C=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",I=T.toString,z=P.hasOwnProperty,L=P.toString,q=RegExp("^"+I.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=v.Symbol,B=v.Uint8Array,F=P.propertyIsEnumerable,N=U.splice,V=(k=Object.keys,R=Object,function(e){return k(R(e))}),G=Oe(v,"DataView"),H=Oe(v,"Map"),X=Oe(v,"Promise"),$=Oe(v,"Set"),W=Oe(v,"WeakMap"),K=Oe(Object,"create"),Q=xe(G),Z=xe(H),J=xe(X),Y=xe($),ee=xe(W),te=M?M.prototype:void 0,re=te?te.valueOf:void 0,ne=te?te.toString:void 0;function oe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ue(e){var t=-1,r=e?e.length:0;for(this.__data__=new ae;++t<r;)this.add(e[t])}function se(e){this.__data__=new ie(e)}function ce(e,t){var r=Le(e)||ze(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!z.call(e,i)||o&&("length"==i||Ce(i,n))||r.push(i);return r}function fe(e,t){for(var r=e.length;r--;)if(Ie(e[r][0],t))return r;return-1}oe.prototype.clear=function(){this.__data__=K?K(null):{}},oe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},oe.prototype.get=function(e){var t=this.__data__;if(K){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return z.call(t,e)?t[e]:void 0},oe.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:z.call(t,e)},oe.prototype.set=function(e,t){return this.__data__[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[]},ie.prototype.delete=function(e){var t=this.__data__,r=fe(t,e);return!(r<0)&&(r==t.length-1?t.pop():N.call(t,r,1),!0)},ie.prototype.get=function(e){var t=this.__data__,r=fe(t,e);return r<0?void 0:t[r][1]},ie.prototype.has=function(e){return fe(this.__data__,e)>-1},ie.prototype.set=function(e,t){var r=this.__data__,n=fe(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},ae.prototype.clear=function(){this.__data__={hash:new oe,map:new(H||ie),string:new oe}},ae.prototype.delete=function(e){return Ae(this,e).delete(e)},ae.prototype.get=function(e){return Ae(this,e).get(e)},ae.prototype.has=function(e){return Ae(this,e).has(e)},ae.prototype.set=function(e,t){return Ae(this,e).set(e,t),this},ue.prototype.add=ue.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ue.prototype.has=function(e){return this.__data__.has(e)},se.prototype.clear=function(){this.__data__=new ie},se.prototype.delete=function(e){return this.__data__.delete(e)},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ie){var n=r.__data__;if(!H||n.length<199)return n.push([e,t]),this;r=this.__data__=new ae(n)}return r.set(e,t),this};var le,pe,de=(le=function(e,t){return e&&_e(e,t,He)},function(e,t){if(null==e)return e;if(!qe(e))return le(e,t);for(var r=e.length,n=pe?r:-1,o=Object(e);(pe?n--:++n<r)&&!1!==t(o[n],n,o););return e});function he(e,t){var r=[];return de(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}var _e=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),u=a.length;u--;){var s=a[e?u:++o];if(!1===r(i[s],s,i))break}return t}}();function ve(e,t){for(var r=0,n=(t=ke(t,e)?[t]:je(t)).length;null!=e&&r<n;)e=e[Pe(t[r++])];return r&&r==n?e:void 0}function be(e,t){return null!=e&&t in Object(e)}function ye(e,t,a,u,s){return e===t||(null==e||null==t||!Fe(e)&&!Ne(t)?e!=e&&t!=t:function(e,t,a,u,s,c){var f=Le(e),l=Le(t),p="[object Array]",d="[object Array]";f||(p=(p=Se(e))==r?o:p);l||(d=(d=Se(t))==r?o:d);var h=p==o&&!A(e),_=d==o&&!A(t),v=p==d;if(v&&!h)return c||(c=new se),f||Ge(e)?Ee(e,t,a,u,s,c):function(e,t,r,o,a,u,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new B(e),new B(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ie(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case n:var c=O;case i:var f=2&u;if(c||(c=S),e.size!=t.size&&!f)return!1;var l=s.get(e);if(l)return l==t;u|=1,s.set(e,t);var p=Ee(c(e),c(t),o,a,u,s);return s.delete(e),p;case"[object Symbol]":if(re)return re.call(e)==re.call(t)}return!1}(e,t,p,a,u,s,c);if(!(2&s)){var b=h&&z.call(e,"__wrapped__"),y=_&&z.call(t,"__wrapped__");if(b||y){var g=b?e.value():e,m=y?t.value():t;return c||(c=new se),a(g,m,u,s,c)}}if(!v)return!1;return c||(c=new se),function(e,t,r,n,o,i){var a=2&o,u=He(e),s=u.length,c=He(t).length;if(s!=c&&!a)return!1;var f=s;for(;f--;){var l=u[f];if(!(a?l in t:z.call(t,l)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var d=!0;i.set(e,t),i.set(t,e);var h=a;for(;++f<s;){l=u[f];var _=e[l],v=t[l];if(n)var b=a?n(v,_,l,t,e,i):n(_,v,l,e,t,i);if(!(void 0===b?_===v||r(_,v,n,o,i):b)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var y=e.constructor,g=t.constructor;y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(d=!1)}return i.delete(e),i.delete(t),d}(e,t,a,u,s,c)}(e,t,ye,a,u,s))}function ge(e){return!(!Fe(e)||function(e){return!!D&&D in e}(e))&&(Me(e)||A(e)?q:l).test(xe(e))}function me(e){return"function"==typeof e?e:null==e?Xe:"object"==typeof e?Le(e)?function(e,t){if(ke(e)&&Re(t))return Ue(Pe(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:ve(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=ke(t,e)?[t]:je(t);var n,o=-1,i=t.length;for(;++o<i;){var a=Pe(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;return!!(i=e?e.length:0)&&Be(i)&&Ce(a,i)&&(Le(e)||ze(e))}(e,t,be)}(r,e):ye(t,n,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=He(e),r=t.length;for(;r--;){var n=t[r],o=e[n];t[r]=[n,o,Re(o)]}return t}(e);if(1==t.length&&t[0][2])return Ue(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var u=r[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){var s=(u=r[o])[0],c=e[s],f=u[1];if(a&&u[2]){if(void 0===c&&!(s in e))return!1}else{var l=new se;if(n)var p=n(c,f,s,e,t,l);if(!(void 0===p?ye(f,c,n,3,l):p))return!1}}return!0}(r,e,t)}}(e):ke(t=e)?(r=Pe(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return ve(t,e)}}(t);var t,r}function we(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||P,t!==n)return V(e);var t,r,n,o=[];for(var i in Object(e))z.call(e,i)&&"constructor"!=i&&o.push(i);return o}function je(e){return Le(e)?e:Te(e)}function Ee(e,t,r,n,o,i){var a=2&o,u=e.length,s=t.length;if(u!=s&&!(a&&s>u))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var f=-1,l=!0,p=1&o?new ue:void 0;for(i.set(e,t),i.set(t,e);++f<u;){var d=e[f],h=t[f];if(n)var _=a?n(h,d,f,t,e,i):n(d,h,f,e,t,i);if(void 0!==_){if(_)continue;l=!1;break}if(p){if(!E(t,(function(e,t){if(!p.has(t)&&(d===e||r(d,e,n,o,i)))return p.add(t)}))){l=!1;break}}else if(d!==h&&!r(d,h,n,o,i)){l=!1;break}}return i.delete(e),i.delete(t),l}function Ae(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Oe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ge(r)?r:void 0}var Se=function(e){return L.call(e)};function Ce(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||p.test(e))&&e>-1&&e%1==0&&e<t}function ke(e,t){if(Le(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ve(e))||(u.test(e)||!a.test(e)||null!=t&&e in Object(t))}function Re(e){return e==e&&!Fe(e)}function Ue(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(G&&"[object DataView]"!=Se(new G(new ArrayBuffer(1)))||H&&Se(new H)!=n||X&&"[object Promise]"!=Se(X.resolve())||$&&Se(new $)!=i||W&&"[object WeakMap]"!=Se(new W))&&(Se=function(e){var t=L.call(e),r=t==o?e.constructor:void 0,a=r?xe(r):void 0;if(a)switch(a){case Q:return"[object DataView]";case Z:return n;case J:return"[object Promise]";case Y:return i;case ee:return"[object WeakMap]"}return t});var Te=De((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Ve(e))return ne?ne.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return s.test(e)&&r.push(""),e.replace(c,(function(e,t,n,o){r.push(n?o.replace(f,"$1"):t||e)})),r}));function Pe(e){if("string"==typeof e||Ve(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function xe(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function De(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(De.Cache||ae),r}function Ie(e,t){return e===t||e!=e&&t!=t}function ze(e){return function(e){return Ne(e)&&qe(e)}(e)&&z.call(e,"callee")&&(!F.call(e,"callee")||L.call(e)==r)}De.Cache=ae;var Le=Array.isArray;function qe(e){return null!=e&&Be(e.length)&&!Me(e)}function Me(e){var t=Fe(e)?L.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Fe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ne(e){return!!e&&"object"==typeof e}function Ve(e){return"symbol"==typeof e||Ne(e)&&"[object Symbol]"==L.call(e)}var Ge=w?function(e){return function(t){return e(t)}}(w):function(e){return Ne(e)&&Be(e.length)&&!!d[L.call(e)]};function He(e){return qe(e)?ce(e):we(e)}function Xe(e){return e}e.exports=function(e,t){return(Le(e)?j:he)(e,me(t))}})),_={assignIn:lodash_assignin,remove:lodash_remove,filter:lodash_filter},tusuploader=function(e){var t={QUEUED:1,STARTED:2,UPLOADING:3,COMPLETED:4,CANCELLED:5,FAILED:6},r=mitt(),n=[],o=_.assignIn({endpoint:"/uploadjobs/",retryDelays:[0,1e3,3e3,5e3],autoUpload:!1,chunkSize:5e3},e||{});if(void 0===typeof document.querySelector)throw new Error("TusUpload: Browser not supported.");if(!o.endpoint)throw new Error("TusUpload: Url not specified.");if(!tus.isSupported)throw new Error("TusUpload: Tus upload protocol not supported.");function i(e){this.status=t.FAILED,r.emit("upload.failed",{upload:this,type:"upload.failed",error:e})}function a(e,n,o){var i=(n/o*100).toFixed(2);this.status=t.UPLOADING,this.uploadPercentage=i,this.uploadTransferredSize=n,r.emit("upload.progress",{upload:this,type:"upload.progress",percentage:i,total:o,transferred:n})}function u(){this.status=t.COMPLETED,r.emit("upload.completed",{upload:this,type:"upload.completed"})}function s(e,r){return this.id=cuid_1(),this.metadata=_.assignIn({filename:e.name,upload_request_id:this.id},r||{}),this.transport=new tus.Upload(e,{endpoint:o.tus_endpoint,retryDelays:o.retryDelays,chunkSize:o.chunkSize,metadata:this.metadata,onError:i.bind(this),onChunkComplete:a.bind(this),onSuccess:u.bind(this)}),this.status=t.QUEUED,this.uploadToken=null,this.uploadPercentage=0,this.uploadSize=e.size,this.uploadTransferredSize=0,this.uploadRemainingTime=null,this.file=e,this}s.prototype.stop=function(){return this.transport.abort(),this.status=t.CANCELLED,window.axios.delete(o.endpoint+""+this.id).then(function(){r.emit("upload.cancelled",{upload:this,type:"upload.cancelled"})}.bind(this)).catch((function(){})),this},s.prototype.start=function(){return this.status=t.STARTED,r.emit("upload.started",{upload:this,type:"upload.started"}),window.axios.post(o.endpoint,lodash_assignin({id:this.id,filename:this.metadata.filename,filesize:this.file.size||"",filetype:this.file.type||""},this.metadata)).then(function(e){this.uploadToken=e.data.upload_token,this.transport.options.metadata.token=this.uploadToken,this.transport.options.endpoint=e.data.location,this.status=t.UPLOADING,this.transport.start()}.bind(this)).catch((function(e){i(e)})),this};var c={upload:function(e,t){var i=new s(e,t||{});return n.push(i),r.emit("upload.queued",{upload:i,type:"upload.queued"}),o.autoUpload&&i.start(),i}};return c.add=c.upload,c.remove=function(e){var o=_.remove(n,(function(t){return t.id===e}));return o&&o.length>=1?(o.forEach((function(e){e.status===t.UPLOADING&&e.stop()}),this),r.emit("upload.removed",{upload:o,type:"upload.removed"}),o):null},c.cancel=function(e){var r=_.remove(n,(function(t){return t.id===e}));return r&&r.length>=1?(r.forEach((function(e){e.status===t.UPLOADING&&e.stop()}),this),1==r.length?r[0]:r):null},c.uploads=function(e){return _.filter(n,e)},c.on=function(e,t){return r.on(e,t),c},c.off=function(e,t){return r.removeListener(e,t),c},c.Status=t,c.Upload=s,c};module.exports=tusuploader;
